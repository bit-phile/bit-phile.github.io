<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Docker Networking - How does it work? | bitPhile</title><meta name=keywords content="docker,networking,ports,bridge,routintg,routing mesh,overlay"><meta name=description content="Hello folks! Good to see you again on our journey of Docker. In this post, we would be learning about docker networking. So, let&rsquo;s get started.
What is covered? Abstract Problem Statement How does Docker Network solve the problem? Simple example Types of networks based on drivers Diving deep into bridge networks Conclusion Abstract Docker has been a powerful tool for creating and managing independent applications and services. These services are interacting with each other through specified interfaces."><meta name=author content="Nitin"><link rel=canonical href=https://bit-phile.github.io/tech/docker/docker-networking/><link crossorigin=anonymous href=/assets/css/stylesheet.6a98292fb8fa8cf0f3ba4042d4b75515c04267550f3ad49ff6271b5af9562443.css integrity="sha256-apgpL7j6jPDzukBC1LdVFcBCZ1UPOtSf9icbWvlWJEM=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://bit-phile.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://bit-phile.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://bit-phile.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://bit-phile.github.io/apple-touch-icon.png><link rel=mask-icon href=https://bit-phile.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Docker Networking - How does it work?"><meta property="og:description" content="Hello folks! Good to see you again on our journey of Docker. In this post, we would be learning about docker networking. So, let&rsquo;s get started.
What is covered? Abstract Problem Statement How does Docker Network solve the problem? Simple example Types of networks based on drivers Diving deep into bridge networks Conclusion Abstract Docker has been a powerful tool for creating and managing independent applications and services. These services are interacting with each other through specified interfaces."><meta property="og:type" content="article"><meta property="og:url" content="https://bit-phile.github.io/tech/docker/docker-networking/"><meta property="article:section" content="tech"><meta property="article:published_time" content="2023-03-18T12:36:44+05:30"><meta property="article:modified_time" content="2023-03-18T12:36:44+05:30"><meta name=twitter:card content="summary"><meta name=twitter:title content="Docker Networking - How does it work?"><meta name=twitter:description content="Hello folks! Good to see you again on our journey of Docker. In this post, we would be learning about docker networking. So, let&rsquo;s get started.
What is covered? Abstract Problem Statement How does Docker Network solve the problem? Simple example Types of networks based on drivers Diving deep into bridge networks Conclusion Abstract Docker has been a powerful tool for creating and managing independent applications and services. These services are interacting with each other through specified interfaces."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Teches","item":"https://bit-phile.github.io/tech/"},{"@type":"ListItem","position":2,"name":"Docker Networking - How does it work?","item":"https://bit-phile.github.io/tech/docker/docker-networking/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Docker Networking - How does it work?","name":"Docker Networking - How does it work?","description":"Hello folks! Good to see you again on our journey of Docker. In this post, we would be learning about docker networking. So, let\u0026rsquo;s get started.\nWhat is covered? Abstract Problem Statement How does Docker Network solve the problem? Simple example Types of networks based on drivers Diving deep into bridge networks Conclusion Abstract Docker has been a powerful tool for creating and managing independent applications and services. These services are interacting with each other through specified interfaces.","keywords":["docker","networking","ports","bridge","routintg","routing mesh","overlay"],"articleBody":" Hello folks! Good to see you again on our journey of Docker. In this post, we would be learning about docker networking. So, letâ€™s get started.\nWhat is covered? Abstract Problem Statement How does Docker Network solve the problem? Simple example Types of networks based on drivers Diving deep into bridge networks Conclusion Abstract Docker has been a powerful tool for creating and managing independent applications and services. These services are interacting with each other through specified interfaces. However, the isolated environment of docker stymies that interaction. An isolated environment hinders services request-response communications as they have different network namespaces.\nTo solve this problem, docker introduced the concept of networking. Docker Networking.\nProblem without networking Applications are running in their containers. These containers have their networking interfaces, namespace, etc. They are not aware of other containers. If there is an application that wants to communicate with another application, sends a request to a specified endpoint of another application. The request never reaches another application as networks are different and isolated.\nFor example, consider a chat application feeberchat (I created this app a long time ago ðŸ˜„). feeberchat is running inside a container A. The database of feeberchat is getting stored in an instance of mongodb running inside another container B.\nAs both A and B have different network namespaces, they canâ€™t communicate.\nHow does Docker Networking solve the problem? Docker networking allows to create isolated networks for containers to communicate with each other. It creates a common networking namespace where containers reside and communicate.\nAn example Assume we have a node (express) application running on port 3000, dockerized with endpoints:\n/ /health Running that application in no network using\nâŸ© docker run -d --name express-app --network none bitphile/express-app (base) Letâ€™s try to access it from another container.\nâŸ© docker run -it --rm --name alpine-shell alpine:latest sh (base) It opens up the container. Now we have to send a request to container express-app. What is the endpoint? We donâ€™t know as express-app is running without any network. Docker didnâ€™t assign any IP address to express-app container.\nNow, letâ€™s run express-app again differently\nâŸ© docker run -d --name express-app bitphile/express-app (base) Inspecting network details of express-app gives\n{ \"bridge\": { \"IPAMConfig\": null, \"Links\": null, \"Aliases\": null, \"NetworkID\": \"8f7326c66c80c45501e24eb7c29596b9a1065624a81b443ef34f8e5c59abab05\", \"EndpointID\": \"987f33191fc7843190ac74227c8d062b6a8e2b9c2101e52e289f2f82e6f8c9af\", \"Gateway\": \"172.17.0.1\", \"IPAddress\": \"172.17.0.3\", \"IPPrefixLen\": 16, \"IPv6Gateway\": \"\", \"GlobalIPv6Address\": \"\", \"GlobalIPv6PrefixLen\": 0, \"MacAddress\": \"02:42:ac:11:00:03\", \"DriverOpts\": null } } It bombarded us with a bunch of details. Letâ€™s not worry about the rest of the details and take IPAddress into consideration. IPAdderss is the IP address of container express-app in the default bridge network (coming in the following sections. Just assume it is as a networking type).\nLetâ€™s send a request to this ip address from alpine-shell container.\n$ curl 172.17.0.3:3000/health This is healthy $ Great! We got some results.\nWhat did happen? When we run express-app container without specifying --network flag, it creates a virtual network (which is called default bridge network). Docker assigns an ip address from that virtual network to the container. Thatâ€™s why we could see IPAddress in docker inspect.\nIf you try running express-app with --network none flag and inspect the container, you wouldnâ€™t be seeing any network information.\nNetwork drivers Docker provides various network drivers for different types of requirements. Following is a list of those drivers.\nbridge host overlay macvlan ipvlan Each of these drivers has different capabilities. Select a driver best suits your requirements. For the sake of simplicity and the size of the post, we would be going with bridge network driver.\nBridge Networks Aligning ourselves with the name, we can think of a bridge as something that connects segments. In networking, it is a Link Layer device that connects network segments.\nIn docker, bridge networks connect containers in a network where they can communicate easily while allowing isolation from the rest of the containers not connected to the same bridge network.\nBridge networks can only be used on the same docker daemon host. For networking among containers from different docker hosts, prefer some other docker networking driver (eg overlay network).\nDefault Bridge Network Docker creates this network by default if we donâ€™t specify any network to use.\nâŸ© docker network ls (base) NETWORK ID NAME DRIVER SCOPE 8f7326c66c80 bridge bridge local 1b69478406e4 host host local 9324e36db9ab none null local Look bridge network of the driver bridge. This is the default bridge network created and managed by docker. Though we can also configure it but not doing also suffices the requirements in most cases.\nNote: Have a look at none network with null driver. This is what we have used for no networking.\nUser-defined Bridge Network We can also create a network of driver bridge. This has a few advantages over default bridge network:\nThe most important, user-defined bridge network provides automatic DNS resolution between containers. It means, we can directly use container names to send requests instead of IP addresses. User has total control over the configurations on the network. Only containers with this network type can communicate. Using user-defined Bridge Network Creating a network Following is the command used to create a docker network\ndocker network create [options] Letâ€™s create a network of the name bitphile.\nâŸ© docker network create bitphile (base) 2bfb26180adc42445ca0127f8628d45b71f1871b8b3fdea2a7d3da8b31e9dd17 âŸ© docker network ls (base) NETWORK ID NAME DRIVER SCOPE 2bfb26180adc bitphile bridge local 8f7326c66c80 bridge bridge local 1b69478406e4 host host local 9324e36db9ab none null local By default, it creates a network of driver type bridge. We can specify the driver using --driver flag.\nâŸ© docker network create --driver macvlan bitphile (base) 237a35cfa290dd59db70b099cf970efd5efbd29f150ae65c7add51632d704a81 Inspecting the network details gives us\n[ { \"Name\": \"bitphile\", \"Id\": \"2bfb26180adc42445ca0127f8628d45b71f1871b8b3fdea2a7d3da8b31e9dd17\", \"Created\": \"2023-03-19T09:42:37.48139717Z\", \"Scope\": \"local\", \"Driver\": \"bridge\", \"EnableIPv6\": false, \"IPAM\": { \"Driver\": \"default\", \"Options\": {}, \"Config\": [ { \"Subnet\": \"172.20.0.0/16\", \"Gateway\": \"172.20.0.1\" } ] }, \"Internal\": false, \"Attachable\": false, \"Ingress\": false, \"ConfigFrom\": { \"Network\": \"\" }, \"ConfigOnly\": false, \"Containers\": {}, \"Options\": {}, \"Labels\": {} } ] Running the container with this network\nâŸ© docker run -d --name express-app --network bitphile bitphile/express-app 70ae390032cbf2e1e38e749895cf17533c70021168a457480a3dd57f035296fe If we inspect the network bitphile again, we would see a list of containers using this network.\n[ { \"Name\": \"bitphile\", \"Id\": \"56b7da97479a3a27859e2c62b5a9f84b8389b5b3d5b41b40283b56a40e88d1a6\", \"Created\": \"2023-03-19T09:46:13.74404902Z\", \"Scope\": \"local\", \"Driver\": \"bridge\", \"EnableIPv6\": false, \"IPAM\": { \"Driver\": \"default\", \"Options\": {}, \"Config\": [ { \"Subnet\": \"172.22.0.0/16\", \"Gateway\": \"172.22.0.1\" } ] }, \"Internal\": false, \"Attachable\": false, \"Ingress\": false, \"ConfigFrom\": { \"Network\": \"\" }, \"ConfigOnly\": false, \"Containers\": { \"70ae390032cbf2e1e38e749895cf17533c70021168a457480a3dd57f035296fe\": { \"Name\": \"express-app\", \"EndpointID\": \"0fda9ef2aa92e5966320c330776986c9cea15210354d2994e3060522619a5290\", \"MacAddress\": \"02:42:ac:16:00:02\", \"IPv4Address\": \"172.22.0.2/16\", \"IPv6Address\": \"\" } }, \"Options\": {}, \"Labels\": {} } ] Quick introduction to subnet and gateway This wonâ€™t be thorough. It would just be for understanding networking in the context of docker.\nSubnet It is used to divide the larger network into the smaller network to make network management easy. For example, subnet 172.22.0.0/16 means the first 16 bites will be used for networks, and the rest of 16 bits will be used for hosts in the sub-network.\n172 22 0 0 ------- ---- network host In the context of docker, the subnet makes sure that the network interface has a unique IP address (gateway IP address) and the containers are assigned unique IP addresses. It also helps in routing traffic.\nGateway As the name suggests, it is the entry point (and exit point) of a network segment.\nIn the context of docker, we have gateway 172.22.0.1 which is an entry point for network bitphile.\nSpecifying subnet and gateway It is possible to provide a subnet and gateway while creating a network.\nâŸ© docker network create --subnet=172.20.0.0/16 --gateway=172.20.0.1 bitphile (base) 340e9f5c82185940df2a3a2009e6ef5276c1c6b440a9a8dc5376c5c5df448b90 Try running the same command again and see what happens.\nYou canâ€™t create another network with the subnet already used.\nDelete a network Deleting something gives such a relaxation that canâ€™t be expressed. Specially deleting the code (donâ€™t delete a working code ðŸ˜‚).\nWe can delete the network using\nâŸ© docker network rm bitphile (base) bitphile Conclusion Finally, we are at the home stretch of this post. Hope you found this useful and you got something important out of this. Please reach out to me if you have any feedback. I have given my mail below. See you at the next junction of our journey on docker.\nUntil then,\nReferences Networking overview Container networking Docker bridge networking ðŸ“¨Mail to me\n","wordCount":"1371","inLanguage":"en","datePublished":"2023-03-18T12:36:44+05:30","dateModified":"2023-03-18T12:36:44+05:30","author":{"@type":"Person","name":"Nitin"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://bit-phile.github.io/tech/docker/docker-networking/"},"publisher":{"@type":"Organization","name":"bitPhile","logo":{"@type":"ImageObject","url":"https://bit-phile.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://bit-phile.github.io/ accesskey=h title="bitPhile (Alt + H)">bitPhile</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Docker Networking - How does it work?</h1><div class=post-meta><span title='2023-03-18 12:36:44 +0530 +0530'>March 18, 2023</span>&nbsp;Â·&nbsp;Nitin</div></header><div class=post-content><p><img loading=lazy src=/tech/docker/docker-networking-banner.png alt="Docker networking - How does it work?">
Hello folks! Good to see you again on our journey of Docker. In this post, we would be learning about docker networking. So, let&rsquo;s get started.</p><h2 id=what-is-covered>What is covered?<a hidden class=anchor aria-hidden=true href=#what-is-covered>#</a></h2><ol><li>Abstract</li><li>Problem Statement</li><li>How does Docker Network solve the problem?</li><li>Simple example</li><li>Types of networks based on drivers</li><li>Diving deep into <code>bridge</code> networks</li><li>Conclusion</li></ol><h2 id=abstract>Abstract<a hidden class=anchor aria-hidden=true href=#abstract>#</a></h2><p>Docker has been a powerful tool for creating and managing independent applications and services. These services are interacting with each other through specified interfaces. However, the isolated environment of docker stymies that interaction. An isolated environment hinders services request-response communications as they have different network namespaces.</p><p>To solve this problem, docker introduced the concept of networking. Docker Networking.</p><h2 id=problem-without-networking>Problem without networking<a hidden class=anchor aria-hidden=true href=#problem-without-networking>#</a></h2><p>Applications are running in their containers. These containers have their networking interfaces, namespace, etc. They are not aware of other containers. If there is an application that wants to communicate with another application, sends a request to a specified endpoint of another application. The request never reaches another application as networks are different and isolated.</p><p>For example, consider a chat application <code>feeberchat</code> (I created this app a long time ago ðŸ˜„). <code>feeberchat</code> is running inside a container <code>A</code>. The database of <code>feeberchat</code> is getting stored in an instance of <code>mongodb</code> running inside another container <code>B</code>.</p><p>As both <code>A</code> and <code>B</code> have different network namespaces, they can&rsquo;t communicate.</p><p><img loading=lazy src=/tech/docker/docker-with-no-networking.png alt="Docker with no networking" title="Docker with no networking for containers A and B"></p><h2 id=how-does-docker-networking-solve-the-problem>How does Docker Networking solve the problem?<a hidden class=anchor aria-hidden=true href=#how-does-docker-networking-solve-the-problem>#</a></h2><p>Docker networking allows to create isolated networks for containers to communicate with each other. It creates a common networking namespace where containers reside and communicate.</p><p><img loading=lazy src=/tech/docker/docker-with-networking.png alt="Docker with networking" title="Docker with networking for containers A and B"></p><h2 id=an-example>An example<a hidden class=anchor aria-hidden=true href=#an-example>#</a></h2><p>Assume we have a node (express) application running on port <code>3000</code>, dockerized with endpoints:</p><ol><li><code>/</code></li><li><code>/health</code></li></ol><p>Running that application in no network using</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>âŸ© docker run -d --name express-app --network none bitphile/express-app       <span style=color:#f92672>(</span>base<span style=color:#f92672>)</span>
</span></span></code></pre></div><p>Let&rsquo;s try to access it from another container.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>âŸ© docker run -it --rm --name alpine-shell alpine:latest sh       <span style=color:#f92672>(</span>base<span style=color:#f92672>)</span>
</span></span></code></pre></div><p>It opens up the container. Now we have to send a request to container <code>express-app</code>. What is the endpoint? We don&rsquo;t know as <code>express-app</code> is running without any network. Docker didn&rsquo;t assign any IP address to <code>express-app</code> container.</p><p>Now, let&rsquo;s run <code>express-app</code> again differently</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>âŸ© docker run -d --name express-app bitphile/express-app                <span style=color:#f92672>(</span>base<span style=color:#f92672>)</span>
</span></span></code></pre></div><p>Inspecting network details of <code>express-app</code> gives</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;bridge&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;IPAMConfig&#34;</span>: <span style=color:#66d9ef>null</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;Links&#34;</span>: <span style=color:#66d9ef>null</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;Aliases&#34;</span>: <span style=color:#66d9ef>null</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;NetworkID&#34;</span>: <span style=color:#e6db74>&#34;8f7326c66c80c45501e24eb7c29596b9a1065624a81b443ef34f8e5c59abab05&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;EndpointID&#34;</span>: <span style=color:#e6db74>&#34;987f33191fc7843190ac74227c8d062b6a8e2b9c2101e52e289f2f82e6f8c9af&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;Gateway&#34;</span>: <span style=color:#e6db74>&#34;172.17.0.1&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;IPAddress&#34;</span>: <span style=color:#e6db74>&#34;172.17.0.3&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;IPPrefixLen&#34;</span>: <span style=color:#ae81ff>16</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;IPv6Gateway&#34;</span>: <span style=color:#e6db74>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;GlobalIPv6Address&#34;</span>: <span style=color:#e6db74>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;GlobalIPv6PrefixLen&#34;</span>: <span style=color:#ae81ff>0</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;MacAddress&#34;</span>: <span style=color:#e6db74>&#34;02:42:ac:11:00:03&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;DriverOpts&#34;</span>: <span style=color:#66d9ef>null</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>It bombarded us with a bunch of details. Let&rsquo;s not worry about the rest of the details and take <code>IPAddress</code> into consideration. <code>IPAdderss</code> is the IP address of container <code>express-app</code> in the <code>default bridge</code> network (coming in the following sections. Just assume it is as a networking type).</p><p>Let&rsquo;s send a request to this ip address from <code>alpine-shell</code> container.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ curl 172.17.0.3:3000/health
</span></span><span style=display:flex><span>This is healthy $
</span></span></code></pre></div><p>Great! We got some results.</p><h3 id=what-did-happen>What did happen?<a hidden class=anchor aria-hidden=true href=#what-did-happen>#</a></h3><p>When we run <code>express-app</code> container without specifying <code>--network</code> flag, it creates a virtual network (which is called <code>default bridge</code> network). Docker assigns an ip address from that virtual network to the container. That&rsquo;s why we could see <code>IPAddress</code> in docker inspect.</p><p>If you try running <code>express-app</code> with <code>--network none</code> flag and inspect the container, you wouldn&rsquo;t be seeing any network information.</p><p><img loading=lazy src=/tech/docker/docker-default-bridge.png alt="Default bridge networking"></p><h2 id=network-drivers>Network drivers<a hidden class=anchor aria-hidden=true href=#network-drivers>#</a></h2><p>Docker provides various network drivers for different types of requirements. Following is a list of those drivers.</p><ol><li>bridge</li><li>host</li><li>overlay</li><li>macvlan</li><li>ipvlan</li></ol><p>Each of these drivers has different capabilities. Select a driver best suits your requirements. For the sake of simplicity and the size of the post, we would be going with <code>bridge</code> network driver.</p><h2 id=bridge-networks>Bridge Networks<a hidden class=anchor aria-hidden=true href=#bridge-networks>#</a></h2><p>Aligning ourselves with the name, we can think of a bridge as something that connects segments. In networking, it is a Link Layer device that connects network segments.</p><p>In docker, bridge networks connect containers in a network where they can communicate easily while allowing isolation from the rest of the containers not connected to the same bridge network.</p><p>Bridge networks can only be used on the <strong>same</strong> docker daemon host. For networking among containers from different docker hosts, prefer some other docker networking driver (eg <a href=https://docs.docker.com/network/overlay/>overlay network</a>).</p><h3 id=default-bridge-network>Default Bridge Network<a hidden class=anchor aria-hidden=true href=#default-bridge-network>#</a></h3><p>Docker creates this network by default if we don&rsquo;t specify any network to use.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>âŸ© docker network ls                                                              <span style=color:#f92672>(</span>base<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>NETWORK ID     NAME         DRIVER    SCOPE
</span></span><span style=display:flex><span>8f7326c66c80   bridge       bridge    local
</span></span><span style=display:flex><span>1b69478406e4   host         host      local
</span></span><span style=display:flex><span>9324e36db9ab   none         null      local
</span></span></code></pre></div><p>Look <code>bridge</code> network of the driver <code>bridge</code>. This is the default bridge network created and managed by docker. Though we can also configure it but not doing also suffices the requirements in most cases.</p><blockquote><p>Note: Have a look at <code>none</code> network with <code>null</code> driver. This is what we have used for no networking.</p></blockquote><h3 id=user-defined-bridge-network>User-defined Bridge Network<a hidden class=anchor aria-hidden=true href=#user-defined-bridge-network>#</a></h3><p>We can also create a network of driver <code>bridge</code>. This has a few advantages over <code>default bridge</code> network:</p><ol><li>The most important, user-defined bridge network provides <strong>automatic DNS resolution between containers</strong>. It means, we can directly use container names to send requests instead of IP addresses.</li><li>User has total control over the configurations on the network.</li><li>Only containers with this network type can communicate.</li></ol><h3 id=using-user-defined-bridge-network>Using user-defined Bridge Network<a hidden class=anchor aria-hidden=true href=#using-user-defined-bridge-network>#</a></h3><h4 id=creating-a-network>Creating a network<a hidden class=anchor aria-hidden=true href=#creating-a-network>#</a></h4><p>Following is the command used to create a docker network</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker network create <span style=color:#f92672>[</span>options<span style=color:#f92672>]</span> &lt;name&gt;
</span></span></code></pre></div><p>Let&rsquo;s create a network of the name <code>bitphile</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>âŸ© docker network create bitphile                                                <span style=color:#f92672>(</span>base<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>2bfb26180adc42445ca0127f8628d45b71f1871b8b3fdea2a7d3da8b31e9dd17
</span></span><span style=display:flex><span>âŸ© docker network ls                                                             <span style=color:#f92672>(</span>base<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>NETWORK ID     NAME       DRIVER    SCOPE
</span></span><span style=display:flex><span>2bfb26180adc   bitphile   bridge    local
</span></span><span style=display:flex><span>8f7326c66c80   bridge     bridge    local
</span></span><span style=display:flex><span>1b69478406e4   host       host      local
</span></span><span style=display:flex><span>9324e36db9ab   none       null      local
</span></span></code></pre></div><p>By default, it creates a network of driver type <code>bridge</code>. We can specify the driver using <code>--driver</code> flag.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>âŸ© docker network create --driver macvlan bitphile                               <span style=color:#f92672>(</span>base<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>237a35cfa290dd59db70b099cf970efd5efbd29f150ae65c7add51632d704a81
</span></span></code></pre></div><p>Inspecting the network details gives us</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>[
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;Name&#34;</span>: <span style=color:#e6db74>&#34;bitphile&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;Id&#34;</span>: <span style=color:#e6db74>&#34;2bfb26180adc42445ca0127f8628d45b71f1871b8b3fdea2a7d3da8b31e9dd17&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;Created&#34;</span>: <span style=color:#e6db74>&#34;2023-03-19T09:42:37.48139717Z&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;Scope&#34;</span>: <span style=color:#e6db74>&#34;local&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;Driver&#34;</span>: <span style=color:#e6db74>&#34;bridge&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;EnableIPv6&#34;</span>: <span style=color:#66d9ef>false</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;IPAM&#34;</span>: {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Driver&#34;</span>: <span style=color:#e6db74>&#34;default&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Options&#34;</span>: {},
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Config&#34;</span>: [
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>          <span style=color:#f92672>&#34;Subnet&#34;</span>: <span style=color:#e6db74>&#34;172.20.0.0/16&#34;</span>,
</span></span><span style=display:flex><span>          <span style=color:#f92672>&#34;Gateway&#34;</span>: <span style=color:#e6db74>&#34;172.20.0.1&#34;</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      ]
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;Internal&#34;</span>: <span style=color:#66d9ef>false</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;Attachable&#34;</span>: <span style=color:#66d9ef>false</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;Ingress&#34;</span>: <span style=color:#66d9ef>false</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;ConfigFrom&#34;</span>: {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Network&#34;</span>: <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;ConfigOnly&#34;</span>: <span style=color:#66d9ef>false</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;Containers&#34;</span>: {},
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;Options&#34;</span>: {},
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;Labels&#34;</span>: {}
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>]
</span></span></code></pre></div><p>Running the container with this network</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>âŸ© docker run -d --name express-app --network bitphile bitphile/express-app
</span></span><span style=display:flex><span>70ae390032cbf2e1e38e749895cf17533c70021168a457480a3dd57f035296fe
</span></span></code></pre></div><p>If we inspect the network <code>bitphile</code> again, we would see a list of containers using this network.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>[
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;Name&#34;</span>: <span style=color:#e6db74>&#34;bitphile&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;Id&#34;</span>: <span style=color:#e6db74>&#34;56b7da97479a3a27859e2c62b5a9f84b8389b5b3d5b41b40283b56a40e88d1a6&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;Created&#34;</span>: <span style=color:#e6db74>&#34;2023-03-19T09:46:13.74404902Z&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;Scope&#34;</span>: <span style=color:#e6db74>&#34;local&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;Driver&#34;</span>: <span style=color:#e6db74>&#34;bridge&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;EnableIPv6&#34;</span>: <span style=color:#66d9ef>false</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;IPAM&#34;</span>: {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Driver&#34;</span>: <span style=color:#e6db74>&#34;default&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Options&#34;</span>: {},
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Config&#34;</span>: [
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>          <span style=color:#f92672>&#34;Subnet&#34;</span>: <span style=color:#e6db74>&#34;172.22.0.0/16&#34;</span>,
</span></span><span style=display:flex><span>          <span style=color:#f92672>&#34;Gateway&#34;</span>: <span style=color:#e6db74>&#34;172.22.0.1&#34;</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      ]
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;Internal&#34;</span>: <span style=color:#66d9ef>false</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;Attachable&#34;</span>: <span style=color:#66d9ef>false</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;Ingress&#34;</span>: <span style=color:#66d9ef>false</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;ConfigFrom&#34;</span>: {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Network&#34;</span>: <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;ConfigOnly&#34;</span>: <span style=color:#66d9ef>false</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;Containers&#34;</span>: {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;70ae390032cbf2e1e38e749895cf17533c70021168a457480a3dd57f035296fe&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;Name&#34;</span>: <span style=color:#e6db74>&#34;express-app&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;EndpointID&#34;</span>: <span style=color:#e6db74>&#34;0fda9ef2aa92e5966320c330776986c9cea15210354d2994e3060522619a5290&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;MacAddress&#34;</span>: <span style=color:#e6db74>&#34;02:42:ac:16:00:02&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;IPv4Address&#34;</span>: <span style=color:#e6db74>&#34;172.22.0.2/16&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;IPv6Address&#34;</span>: <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;Options&#34;</span>: {},
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;Labels&#34;</span>: {}
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>]
</span></span></code></pre></div><h4 id=quick-introduction-to-subnet-and-gateway>Quick introduction to subnet and gateway<a hidden class=anchor aria-hidden=true href=#quick-introduction-to-subnet-and-gateway>#</a></h4><p>This won&rsquo;t be thorough. It would just be for understanding networking in the context of docker.</p><h5 id=subnet>Subnet<a hidden class=anchor aria-hidden=true href=#subnet>#</a></h5><p>It is used to divide the larger network into the smaller network to make network management easy. For example, subnet <code>172.22.0.0/16</code> means the first <code>16 bites</code> will be used for networks, and the rest of <code>16 bits</code> will be used for hosts in the sub-network.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plain data-lang=plain><span style=display:flex><span>
</span></span><span style=display:flex><span>172    22    0    0
</span></span><span style=display:flex><span> -------      ----
</span></span><span style=display:flex><span> network      host
</span></span></code></pre></div><p>In the context of docker, the subnet makes sure that the network interface has a unique IP address (gateway IP address) and the containers are assigned unique IP addresses. It also helps in routing traffic.</p><h5 id=gateway>Gateway<a hidden class=anchor aria-hidden=true href=#gateway>#</a></h5><p>As the name suggests, it is the entry point (and exit point) of a network segment.</p><p>In the context of docker, we have gateway <code>172.22.0.1</code> which is an entry point for network <code>bitphile</code>.</p><h4 id=specifying-subnet-and-gateway>Specifying subnet and gateway<a hidden class=anchor aria-hidden=true href=#specifying-subnet-and-gateway>#</a></h4><p>It is possible to provide a subnet and gateway while creating a network.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>âŸ© docker network create --subnet<span style=color:#f92672>=</span>172.20.0.0/16 --gateway<span style=color:#f92672>=</span>172.20.0.1 bitphile  <span style=color:#f92672>(</span>base<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>340e9f5c82185940df2a3a2009e6ef5276c1c6b440a9a8dc5376c5c5df448b90
</span></span></code></pre></div><p>Try running the same command again and see what happens.</p><p>You can&rsquo;t create another network with the subnet already used.</p><h4 id=delete-a-network>Delete a network<a hidden class=anchor aria-hidden=true href=#delete-a-network>#</a></h4><p>Deleting something gives such a relaxation that can&rsquo;t be expressed. Specially deleting the code (don&rsquo;t delete a working code ðŸ˜‚).</p><p>We can delete the network using</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>âŸ© docker network rm bitphile                                                    <span style=color:#f92672>(</span>base<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>bitphile
</span></span></code></pre></div><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h2><p>Finally, we are at the home stretch of this post. Hope you found this useful and you got something important out of this. Please reach out to me if you have any feedback. I have given my mail below. See you at the next junction of our journey on docker.</p><p>Until then,</p><p><img loading=lazy src=/bye-mr-bean.gif alt="Bye by Mr Bean" title="Bye bye, see you on next post"></p><h2 id=references>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h2><ol><li><a href=https://docs.docker.com/network/>Networking overview</a></li><li><a href=https://docs.docker.com/config/containers/container-networking/>Container networking</a></li><li><a href=https://docs.docker.com/network/bridge/#disconnect-a-container-from-a-user-defined-bridge>Docker bridge networking</a></li></ol><p><a href=mailto:nitin123narayan123@gmail.com>ðŸ“¨Mail to me</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://bit-phile.github.io/tags/docker/>docker</a></li><li><a href=https://bit-phile.github.io/tags/networking/>networking</a></li><li><a href=https://bit-phile.github.io/tags/ports/>ports</a></li><li><a href=https://bit-phile.github.io/tags/bridge/>bridge</a></li><li><a href=https://bit-phile.github.io/tags/routintg/>routintg</a></li><li><a href=https://bit-phile.github.io/tags/routing-mesh/>routing mesh</a></li><li><a href=https://bit-phile.github.io/tags/overlay/>overlay</a></li></ul></footer><div id=commentor></div><script>const embedCommentorJs=()=>new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("defer",!0),n.src="/commentor/commentor.js",n.onload=e,n.onerror=t,document.head.appendChild(n)}),embedCommentorStyles=()=>new Promise((e,t)=>{const n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.href="/commentor/commentor.css",n.onload=e,n.onerror=t,document.head.appendChild(n)}),getPageId=()=>window.location.href.split("/").slice(-2).join("");embedCommentorJs().then(()=>embedCommentorStyles()).then(()=>{Commentor&&Commentor.init("Comments",getPageId())}).catch(e=>console.error("Commentor not loaded",e))</script></article></main><footer class=footer><span>&copy; 2023 <a href=https://bit-phile.github.io/>bitPhile</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>