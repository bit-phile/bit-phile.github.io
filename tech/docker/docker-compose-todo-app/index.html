<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Docker Compose Todo App | bitPhile</title><meta name=keywords content="docker compose,docker-compose,compose,microservices,networks"><meta name=description content="Greetings, esteemed readers! It is an absolute pleasure to see you all here. I trust that each one of you is in the pink of health and high spirits. In this post, we are going to containerize our todo application using docker compose. If you want to learn about docker compose, refer my post on Docker Compose. Let&rsquo;s hit the road!
What is there to Cover? We will be covering the following sections here."><meta name=author content="Nitin"><link rel=canonical href=https://nitinsharmacs.github.io/tech/docker/docker-compose-todo-app/><link crossorigin=anonymous href=/assets/css/stylesheet.6a98292fb8fa8cf0f3ba4042d4b75515c04267550f3ad49ff6271b5af9562443.css integrity="sha256-apgpL7j6jPDzukBC1LdVFcBCZ1UPOtSf9icbWvlWJEM=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://nitinsharmacs.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://nitinsharmacs.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://nitinsharmacs.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://nitinsharmacs.github.io/apple-touch-icon.png><link rel=mask-icon href=https://nitinsharmacs.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Docker Compose Todo App"><meta property="og:description" content="Greetings, esteemed readers! It is an absolute pleasure to see you all here. I trust that each one of you is in the pink of health and high spirits. In this post, we are going to containerize our todo application using docker compose. If you want to learn about docker compose, refer my post on Docker Compose. Let&rsquo;s hit the road!
What is there to Cover? We will be covering the following sections here."><meta property="og:type" content="article"><meta property="og:url" content="https://nitinsharmacs.github.io/tech/docker/docker-compose-todo-app/"><meta property="og:image" content="https://nitinsharmacs.github.io/tech/docker/docker-compose-todo-app-banner.png"><meta property="article:section" content="tech"><meta property="article:published_time" content="2023-04-02T12:36:36+05:30"><meta property="article:modified_time" content="2023-04-02T12:36:36+05:30"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://nitinsharmacs.github.io/tech/docker/docker-compose-todo-app-banner.png"><meta name=twitter:title content="Docker Compose Todo App"><meta name=twitter:description content="Greetings, esteemed readers! It is an absolute pleasure to see you all here. I trust that each one of you is in the pink of health and high spirits. In this post, we are going to containerize our todo application using docker compose. If you want to learn about docker compose, refer my post on Docker Compose. Let&rsquo;s hit the road!
What is there to Cover? We will be covering the following sections here."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Teches","item":"https://nitinsharmacs.github.io/tech/"},{"@type":"ListItem","position":3,"name":"Docker Compose Todo App","item":"https://nitinsharmacs.github.io/tech/docker/docker-compose-todo-app/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Docker Compose Todo App","name":"Docker Compose Todo App","description":"Greetings, esteemed readers! It is an absolute pleasure to see you all here. I trust that each one of you is in the pink of health and high spirits. In this post, we are going to containerize our todo application using docker compose. If you want to learn about docker compose, refer my post on Docker Compose. Let\u0026rsquo;s hit the road!\nWhat is there to Cover? We will be covering the following sections here.","keywords":["docker compose","docker-compose","compose","microservices","networks"],"articleBody":"Greetings, esteemed readers! It is an absolute pleasure to see you all here. I trust that each one of you is in the pink of health and high spirits. In this post, we are going to containerize our todo application using docker compose. If you want to learn about docker compose, refer my post on Docker Compose. Letâ€™s hit the road!\nWhat is there to Cover? We will be covering the following sections here.\nSetting up the project Create Dockerfile for the backend Create Dockerfile for the frontend Create a docker compose Spin up the compose An introduction to deploys Conclusion Letâ€™s follow through with each one of these sections.\nSetting up the application Prerequisites\nnode npm mysql and docker of course Create your sandbox directory where you would be writing the code. Clone the following project in your sandbox.\n# ssh âŸ© git clone git@github.com:nitinsharmacs/bitphile-todo-app-docker-compose.git # https âŸ© git clone https://github.com/nitinsharmacs/bitphile-todo-app-docker-compose.git Listing down the contents of the project, we will see.\nâŸ© tree (base) . â”œâ”€â”€ README.md â”œâ”€â”€ backend â”‚Â â”œâ”€â”€ README.md â”‚Â â”œâ”€â”€ index.js â”‚Â â”œâ”€â”€ package-lock.json â”‚Â â””â”€â”€ package.json â””â”€â”€ frontend â”œâ”€â”€ README.md â”œâ”€â”€ package-lock.json â”œâ”€â”€ package.json â”œâ”€â”€ public â”‚Â â”œâ”€â”€ favicon.ico â”‚Â â”œâ”€â”€ index.html â”‚Â â”œâ”€â”€ logo192.png â”‚Â â”œâ”€â”€ logo512.png â”‚Â â”œâ”€â”€ manifest.json â”‚Â â””â”€â”€ robots.txt â””â”€â”€ src â”œâ”€â”€ App.css â”œâ”€â”€ App.js â”œâ”€â”€ App.test.js â”œâ”€â”€ components â”‚Â â”œâ”€â”€ CreateTodo.jsx â”‚Â â”œâ”€â”€ Header.jsx â”‚Â â””â”€â”€ TodoItems.jsx â”œâ”€â”€ index.css â”œâ”€â”€ index.js â”œâ”€â”€ logo.svg â”œâ”€â”€ reportWebVitals.js â””â”€â”€ setupTests.js 5 directories, 25 files Install dependencies in each of those directories.\nâŸ© cd frontend âŸ© npm install âŸ© cd ../backend âŸ© npm install Now, start both the backend and frontend.\nfrontend âŸ© npm start backend âŸ© npm start Facing issues with MySQL db? Please make sure it is running. Also, provide environment variables, DB_USER and DB_PASSWORD while running the backend.\nOpen localhost:3000, and you should see an ugly page without CSS. Letâ€™s not worry about the styling of the page.\nYou should be able to add a to-do.\nCreate Dockerfile for the backend Letâ€™s write Dockerfile for the backend.\nFROM node:12-alpine COPY package.json package.json RUN npm install ENV NODE_ENV=production COPY index.js index.js CMD [\"npm\", \"start\"] EXPOSE 3001 Copy and paste this content inside backend/Dockerfile.\nNow, build the image.\nâŸ© docker build -t bitphile/todo-backend . Letâ€™s try running the image weâ€™ve just built.\nâŸ© docker run -d --name todo-backend -p 3001:3001 bitphile/todo-backend 68dc2b21f5e2b8a6d54c35dc46a56f6d0e117793a2a7c1e80dab42ae91826f93 Seeing the logs of the container,\nâŸ© docker logs -f 68dc2b21f5e2b8a6d54c35dc46a56f6d0e117793a2a7c1e80dab42ae91826f93 \u003e backend@1.0.0 start / \u003e node . (node:18) UnhandledPromiseRejectionWarning: Error: getaddrinfo EAI_AGAIN mysql-server at Object.createConnection (/node_modules/mysql2/promise.js:242:31) at Object. (/index.js:54:4) at Module._compile (internal/modules/cjs/loader.js:999:30) at Object.Module._extensions..js (internal/modules/cjs/loader.js:1027:10) at Module.load (internal/modules/cjs/loader.js:863:32) at Function.Module._load (internal/modules/cjs/loader.js:708:14) at Function.executeUserEntryPoint [as runMain] (internal/modules/run_main.js:60:12) at internal/main/run_main_module.js:17:47 (node:18) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). To terminate the node process on unhandled promise rejection, use the CLI flag `--unhandled-rejections=strict` (see https://nodejs.org/api/cli.html#cli_unhandled_rejections_mode). (rejection id: 1) (node:18) [DEP0018] DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code. ðŸ¤¯ We are bombarded with an error. If we see it, it is crying because of the MySQL connection. Our container is not able to connect to the MySQL server. And this is straightforward as no MySQL container is running in the network. We will look at it later when we compose our application. For now, letâ€™s move ahead.\nCreate Dockerfile for frontend Copy the following Dockerfile content inside frontend/Dockerfile\nFROM node:12-alpine AS builder WORKDIR /app COPY package.json package.json RUN npm install COPY . . RUN npm run build FROM nginx:alpine WORKDIR /usr/share/nginx/html RUN rm -rf ./* COPY --from=builder /app/build . ENTRYPOINT [\"nginx\", \"-g\", \"daemon off;\"] Option daemon off specifies nginx to run in the foreground so that the container will continue running. If we donâ€™t specify this option, the nginx service would run in the background and the container will stop running as there is nothing to hold it up.\nLetâ€™s build the image.\nâŸ© docker build -t bitphile/todo-frontend . (base) Sending build context to Docker daemon 478.7kB Step 1/11 : FROM node:12-alpine AS builder ---\u003e bb6d28039b8c Step 2/11 : WORKDIR /app ---\u003e Using cache ---\u003e 8610e0568d30 Step 3/11 : COPY package.json package.json ---\u003e 2cf4f42b3f97 Step 4/11 : RUN npm install ---\u003e Running in 0606b5b332ec performance.now() and performance.timeOrigin. \u003e core-js@3.29.1 postinstall /app/node_modules/core-js \u003e node -e \"try{require('./postinstall')}catch(e){}\" Thank you for using core-js ( https://github.com/zloirock/core-js ) for polyfilling JavaScript standard library! The project needs your help! Please consider supporting of core-js: \u003e https://opencollective.com/core-js \u003e https://patreon.com/zloirock \u003e https://boosty.to/zloirock \u003e bitcoin: bc1qlea7544qtsmj2rayg0lthvza9fau63ux0fstcz I highly recommend reading this: https://github.com/zloirock/core-js/blob/master/docs/2023-02-14-so-whats-next.md \u003e core-js-pure@3.29.1 postinstall /app/node_modules/core-js-pure \u003e node -e \"try{require('./postinstall')}catch(e){}\" Thank you for using core-js ( https://github.com/zloirock/core-js ) for polyfilling JavaScript standard library! The project needs your help! Please consider supporting of core-js: \u003e https://opencollective.com/core-js \u003e https://patreon.com/zloirock \u003e https://boosty.to/zloirock \u003e bitcoin: bc1qlea7544qtsmj2rayg0lthvza9fau63ux0fstcz I highly recommend reading this: https://github.com/zloirock/core-js/blob/master/docs/2023-02-14-so-whats-next.md added 1489 packages from 684 contributors and audited 1490 packages in 69.985s 233 packages are looking for funding run `npm fund` for details found 1 high severity vulnerability run `npm audit fix` to fix them, or `npm audit` for details Removing intermediate container 0606b5b332ec ---\u003e e84821d3c273 Step 5/11 : COPY . . ---\u003e 2582c9e1ccf7 Step 6/11 : RUN npm run build ---\u003e Running in 24a2880afcea \u003e todo-app@0.1.0 build /app \u003e react-scripts build Creating an optimized production build... Compiled successfully. File sizes after gzip: 47.56 kB build/static/js/main.bf9caf07.js 1.78 kB build/static/js/787.2843ca88.chunk.js 264 B build/static/css/main.e6c13ad2.css The project was built assuming it is hosted at /. You can control this with the homepage field in your package.json. The build folder is ready to be deployed. You may serve it with a static server: npm install -g serve serve -s build Find out more about deployment here: https://cra.link/deployment Removing intermediate container 24a2880afcea ---\u003e ca6123013213 Step 7/11 : FROM nginx:alpine ---\u003e 2bc7edbc3cf2 Step 8/11 : WORKDIR /usr/share/nginx/html ---\u003e Using cache ---\u003e 14150ff7fb4b Step 9/11 : RUN rm -rf ./* ---\u003e Using cache ---\u003e dec51b86101d Step 10/11 : COPY --from=builder /app/build . ---\u003e bfc76e5e13ec Step 11/11 : ENTRYPOINT [\"nginx\", \"-g\", \"daemon off;\"] ---\u003e Running in c01fb95e9ca3 Removing intermediate container c01fb95e9ca3 ---\u003e 9ad959056d7a Successfully built 9ad959056d7a Successfully tagged bitphile/todo-frontend:latest Letâ€™s run the image.\nâŸ© docker run -d --name todo-frontend -p 4000:80 bitphile/todo-frontend Now, if we open http://localhost:4000, we should the to-do page.\nCreate Docker Compose file It is time to take the whole picture of our application. To run our application with all those services, we have to create a docker-compose.yml file. Letâ€™s do create one.\nversion: '3.7' name: todo-app services: todo-frontend: container_name: todo-frontend build: ./frontend ports: - 4000:80 networks: - todo-app depends_on: - todo-backend todo-backend: container_name: todo-server build: ./backend ports: - 3001:3001 networks: - todo-app environment: - NODE_ENV=production - DB_USER=root - DB_PASSWORD=password depends_on: - mysql mysql: container_name: mysql-server image: mysql:5.7 volumes: - ./mysql:/var/lib/mysql environment: MYSQL_ROOT_PASSWORD: password MYSQL_DATABASE: todo_app networks: - todo-app networks: todo-app: Letâ€™s do compose up,\nâŸ© docker compose up -d (base) [+] Building 83.3s (22/22) FINISHED =\u003e [todo-app_todo-frontend internal] load build definition from Dockerfi 0.0s =\u003e =\u003e transferring dockerfile: 305B 0.0s =\u003e [todo-app_todo-backend internal] load build definition from Dockerfil 0.0s =\u003e =\u003e transferring dockerfile: 191B 0.0s =\u003e [todo-app_todo-frontend internal] load .dockerignore 0.0s =\u003e =\u003e transferring context: 61B 0.0s =\u003e [todo-app_todo-backend internal] load .dockerignore 0.0s =\u003e =\u003e transferring context: 60B 0.0s =\u003e [todo-app_todo-frontend internal] load metadata for docker.io/library 0.0s =\u003e [todo-app_todo-backend internal] load metadata for docker.io/library/ 0.0s =\u003e CACHED [todo-app_todo-frontend builder 1/6] FROM docker.io/library/no 0.0s =\u003e [todo-app_todo-frontend stage-1 1/4] FROM docker.io/library/nginx:alp 0.0s =\u003e [todo-app_todo-frontend internal] load build context 0.0s =\u003e =\u003e transferring context: 458.37kB 0.0s =\u003e CACHED [todo-app_todo-frontend stage-1 2/4] WORKDIR /usr/share/nginx/ 0.0s =\u003e [todo-app_todo-frontend stage-1 3/4] RUN rm -rf ./* 0.5s =\u003e CACHED [todo-app_todo-frontend builder 2/6] WORKDIR /app 0.0s =\u003e [todo-app_todo-frontend builder 3/6] COPY package.json package.json 0.0s =\u003e [todo-app_todo-backend internal] load build context 0.0s =\u003e =\u003e transferring context: 1.60kB 0.0s =\u003e [todo-app_todo-backend 2/4] COPY package.json package.json 0.0s =\u003e [todo-app_todo-frontend builder 4/6] RUN npm install 69.0s =\u003e [todo-app_todo-backend 3/4] RUN npm install 5.9s =\u003e [todo-app_todo-backend 4/4] COPY index.js index.js 0.0s =\u003e [todo-app_todo-frontend] exporting to image 0.2s =\u003e =\u003e exporting layers 0.0s =\u003e =\u003e writing image sha256:c30480a00b3ca5464f566693178dd5ae117d60a3a62e5 0.0s =\u003e =\u003e naming to docker.io/library/todo-app_todo-backend 0.0s =\u003e =\u003e writing image sha256:28501b3d67ba977a812cfc9e21e91279e52765dc1276a 0.0s =\u003e =\u003e naming to docker.io/library/todo-app_todo-frontend 0.0s =\u003e [todo-app_todo-frontend builder 5/6] COPY . . 0.0s =\u003e [todo-app_todo-frontend builder 6/6] RUN npm run build 13.5s =\u003e [todo-app_todo-frontend stage-1 4/4] COPY --from=builder /app/build . 0.0s [+] Running 4/4 â ¿ Network todo-app_todo-app Created 0.0s â ¿ Container mysql-server Started 0.7s â ¿ Container todo-server Started 1.1s â ¿ Container todo-frontend Started 1.6s Great! Containers seemed to be started. Letâ€™s see,\nâŸ© docker compose ps -a (base) NAME COMMAND SERVICE STATUS PORTS mysql-server \"docker-entrypoint.sâ€¦\" mysql running 3306/tcp, 33060/tcp todo-frontend \"nginx -g 'daemon ofâ€¦\" todo-frontend running 0.0.0.0:4000-\u003e80/tcp todo-server \"docker-entrypoint.sâ€¦\" todo-backend running 0.0.0.0:3001-\u003e3001/tcp, 3001/tcp Now, open http://localhost:4000 and add todos.\nAn introduction to deploys We can create multiple containers for the same service using deploy in docker compose.\nversion: '3.7' name: todo-app services: todo-frontend: container_name: todo-frontend build: ./frontend ports: - 4000:80 networks: - todo-app depends_on: - todo-backend todo-backend: container_name: todo-server build: ./backend ports: - 3000:3000 networks: - todo-app environment: - NODE_ENV=production - DB_USER=root - DB_PASSWORD=password depends_on: - mysql deploy: mode: replicated replicas: 2 mysql: container_name: mysql-server image: mysql:5.7 volumes: - ./mysql:/var/lib/mysql environment: MYSQL_ROOT_PASSWORD: password MYSQL_DATABASE: todo_app networks: - todo-app networks: todo-app: So, this would create two replicas of the service todo-backend. The routing of which container the request should be sent to would be taken care of by the docker itself.\nRestart policy If the container dies unexpectedly, docker compose can restart the container. Docker compose provides a restart policy for the same that we can define in docker compose file.\nversion: '3.7' name: todo-app services: todo-backend: container_name: todo-server build: ./backend ports: - 3001:3001 networks: - todo-app environment: - NODE_ENV=production - DB_USER=root - DB_PASSWORD=password depends_on: - mysql deploy: mode: replicated replicas: 2 restart_policy: condition: any delay: 5s max_attempts: 2 window: 80s condition means the condition to restart the service. delay is the delay in subsequent restart tries and window means how long to wait to decide if the restart is done.\nConclusion Well, this is it for now. I hope you find this useful. If there is any problem while setting up the project and running that up, please drop a comment. Please share your feedback and what our next junction topic should be, in the comment section.\nUntil then,\nReferences Docker Compose file reference ","wordCount":"1726","inLanguage":"en","image":"https://nitinsharmacs.github.io/tech/docker/docker-compose-todo-app-banner.png","datePublished":"2023-04-02T12:36:36+05:30","dateModified":"2023-04-02T12:36:36+05:30","author":{"@type":"Person","name":"Nitin"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://nitinsharmacs.github.io/tech/docker/docker-compose-todo-app/"},"publisher":{"@type":"Organization","name":"bitPhile","logo":{"@type":"ImageObject","url":"https://nitinsharmacs.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://nitinsharmacs.github.io accesskey=h title="bitPhile (Alt + H)">bitPhile</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Docker Compose Todo App</h1><div class=post-meta><span title='2023-04-02 12:36:36 +0530 +0530'>April 2, 2023</span>&nbsp;Â·&nbsp;Nitin</div></header><figure class=entry-cover><img loading=lazy src=https://nitinsharmacs.github.io/tech/docker/docker-compose-todo-app-banner.png alt="Docker compose ToDo app banner"></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#what-is-there-to-cover aria-label="What is there to Cover?">What is there to Cover?</a></li><li><a href=#setting-up-the-application aria-label="Setting up the application">Setting up the application</a></li><li><a href=#create-dockerfile-for-the-backend aria-label="Create Dockerfile for the backend">Create <code>Dockerfile</code> for the backend</a></li><li><a href=#create-dockerfile-for-frontend aria-label="Create Dockerfile for frontend">Create <code>Dockerfile</code> for frontend</a></li><li><a href=#create-docker-compose-file aria-label="Create Docker Compose file">Create Docker Compose file</a></li><li><a href=#an-introduction-to-deploys aria-label="An introduction to deploys">An introduction to deploys</a><ul><li><a href=#restart-policy aria-label="Restart policy">Restart policy</a></li></ul></li><li><a href=#conclusion aria-label=Conclusion>Conclusion</a></li><li><a href=#references aria-label=References>References</a></li></ul></div></details></div><div class=post-content><p>Greetings, esteemed readers! It is an absolute pleasure to see you all here. I trust that each one of you is in the pink of health and high spirits. In this post, we are going to containerize our todo application using docker compose. If you want to learn about docker compose, refer my post on <a href=/tech/docker/docker-compose>Docker Compose</a>. Let&rsquo;s hit the road!</p><h2 id=what-is-there-to-cover>What is there to Cover?<a hidden class=anchor aria-hidden=true href=#what-is-there-to-cover>#</a></h2><p>We will be covering the following sections here.</p><ol><li>Setting up the project</li><li>Create <code>Dockerfile</code> for the backend</li><li>Create <code>Dockerfile</code> for the frontend</li><li>Create a docker compose</li><li>Spin up the compose</li><li>An introduction to deploys</li><li>Conclusion</li></ol><p>Let&rsquo;s follow through with each one of these sections.</p><h2 id=setting-up-the-application>Setting up the application<a hidden class=anchor aria-hidden=true href=#setting-up-the-application>#</a></h2><p><strong>Prerequisites</strong></p><ul><li>node</li><li>npm</li><li>mysql</li><li>and docker of course</li></ul><p>Create your sandbox directory where you would be writing the code. Clone the following project in your sandbox.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># ssh</span>
</span></span><span style=display:flex><span>âŸ© git clone git@github.com:nitinsharmacs/bitphile-todo-app-docker-compose.git
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># https</span>
</span></span><span style=display:flex><span>âŸ© git clone https://github.com/nitinsharmacs/bitphile-todo-app-docker-compose.git
</span></span></code></pre></div><p>Listing down the contents of the project, we will see.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>âŸ© tree                                                                   (base)
</span></span><span style=display:flex><span>.
</span></span><span style=display:flex><span>â”œâ”€â”€ README.md
</span></span><span style=display:flex><span>â”œâ”€â”€ backend
</span></span><span style=display:flex><span>â”‚Â Â  â”œâ”€â”€ README.md
</span></span><span style=display:flex><span>â”‚Â Â  â”œâ”€â”€ index.js
</span></span><span style=display:flex><span>â”‚Â Â  â”œâ”€â”€ package-lock.json
</span></span><span style=display:flex><span>â”‚Â Â  â””â”€â”€ package.json
</span></span><span style=display:flex><span>â””â”€â”€ frontend
</span></span><span style=display:flex><span>    â”œâ”€â”€ README.md
</span></span><span style=display:flex><span>    â”œâ”€â”€ package-lock.json
</span></span><span style=display:flex><span>    â”œâ”€â”€ package.json
</span></span><span style=display:flex><span>    â”œâ”€â”€ public
</span></span><span style=display:flex><span>    â”‚Â Â  â”œâ”€â”€ favicon.ico
</span></span><span style=display:flex><span>    â”‚Â Â  â”œâ”€â”€ index.html
</span></span><span style=display:flex><span>    â”‚Â Â  â”œâ”€â”€ logo192.png
</span></span><span style=display:flex><span>    â”‚Â Â  â”œâ”€â”€ logo512.png
</span></span><span style=display:flex><span>    â”‚Â Â  â”œâ”€â”€ manifest.json
</span></span><span style=display:flex><span>    â”‚Â Â  â””â”€â”€ robots.txt
</span></span><span style=display:flex><span>    â””â”€â”€ src
</span></span><span style=display:flex><span>        â”œâ”€â”€ App.css
</span></span><span style=display:flex><span>        â”œâ”€â”€ App.js
</span></span><span style=display:flex><span>        â”œâ”€â”€ App.test.js
</span></span><span style=display:flex><span>        â”œâ”€â”€ components
</span></span><span style=display:flex><span>        â”‚Â Â  â”œâ”€â”€ CreateTodo.jsx
</span></span><span style=display:flex><span>        â”‚Â Â  â”œâ”€â”€ Header.jsx
</span></span><span style=display:flex><span>        â”‚Â Â  â””â”€â”€ TodoItems.jsx
</span></span><span style=display:flex><span>        â”œâ”€â”€ index.css
</span></span><span style=display:flex><span>        â”œâ”€â”€ index.js
</span></span><span style=display:flex><span>        â”œâ”€â”€ logo.svg
</span></span><span style=display:flex><span>        â”œâ”€â”€ reportWebVitals.js
</span></span><span style=display:flex><span>        â””â”€â”€ setupTests.js
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>5 directories, 25 files
</span></span></code></pre></div><p>Install dependencies in each of those directories.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>âŸ© cd frontend
</span></span><span style=display:flex><span>âŸ© npm install
</span></span><span style=display:flex><span>âŸ© cd ../backend
</span></span><span style=display:flex><span>âŸ© npm install
</span></span></code></pre></div><p>Now, start both the backend and frontend.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>frontend
</span></span><span style=display:flex><span>âŸ© npm start
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>backend
</span></span><span style=display:flex><span>âŸ© npm start
</span></span></code></pre></div><blockquote><p>Facing issues with MySQL db? Please make sure it is running. Also, provide environment variables, <code>DB_USER</code> and <code>DB_PASSWORD</code> while running the backend.</p></blockquote><p>Open <code>localhost:3000</code>, and you should see an ugly page without CSS. Let&rsquo;s not worry about the styling of the page.</p><p><img loading=lazy src=/tech/docker/todo-screen-shot.png alt="todo app screen shot" title="Todo app screenshot"></p><p>You should be able to add a to-do.</p><h2 id=create-dockerfile-for-the-backend>Create <code>Dockerfile</code> for the backend<a hidden class=anchor aria-hidden=true href=#create-dockerfile-for-the-backend>#</a></h2><p>Let&rsquo;s write <code>Dockerfile</code> for the backend.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Dockerfile data-lang=Dockerfile><span style=display:flex><span><span style=color:#66d9ef>FROM</span><span style=color:#e6db74> node:12-alpine</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>COPY</span> package.json package.json<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> npm install<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>ENV</span> NODE_ENV<span style=color:#f92672>=</span>production
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>COPY</span> index.js index.js<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>CMD</span> [<span style=color:#e6db74>&#34;npm&#34;</span>, <span style=color:#e6db74>&#34;start&#34;</span>]<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>EXPOSE</span><span style=color:#e6db74> 3001</span><span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><p>Copy and paste this content inside <code>backend/Dockerfile</code>.</p><p>Now, build the image.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>âŸ© docker build -t bitphile/todo-backend .
</span></span></code></pre></div><p>Let&rsquo;s try running the image we&rsquo;ve just built.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>âŸ© docker run -d --name todo-backend -p 3001:3001 bitphile/todo-backend
</span></span><span style=display:flex><span>68dc2b21f5e2b8a6d54c35dc46a56f6d0e117793a2a7c1e80dab42ae91826f93
</span></span></code></pre></div><p>Seeing the logs of the container,</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>âŸ© docker logs -f 68dc2b21f5e2b8a6d54c35dc46a56f6d0e117793a2a7c1e80dab42ae91826f93
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&gt; backend@1.0.0 start /
</span></span><span style=display:flex><span>&gt; node .
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>node:18<span style=color:#f92672>)</span> UnhandledPromiseRejectionWarning: Error: getaddrinfo EAI_AGAIN mysql-server
</span></span><span style=display:flex><span>    at Object.createConnection <span style=color:#f92672>(</span>/node_modules/mysql2/promise.js:242:31<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    at Object.&lt;anonymous&gt; <span style=color:#f92672>(</span>/index.js:54:4<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    at Module._compile <span style=color:#f92672>(</span>internal/modules/cjs/loader.js:999:30<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    at Object.Module._extensions..js <span style=color:#f92672>(</span>internal/modules/cjs/loader.js:1027:10<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    at Module.load <span style=color:#f92672>(</span>internal/modules/cjs/loader.js:863:32<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    at Function.Module._load <span style=color:#f92672>(</span>internal/modules/cjs/loader.js:708:14<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    at Function.executeUserEntryPoint <span style=color:#f92672>[</span>as runMain<span style=color:#f92672>]</span> <span style=color:#f92672>(</span>internal/modules/run_main.js:60:12<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    at internal/main/run_main_module.js:17:47
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>node:18<span style=color:#f92672>)</span> UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async <span style=color:#66d9ef>function</span> without a catch block, or by rejecting a promise which was not handled with .catch<span style=color:#f92672>()</span>. To terminate the node process on unhandled promise rejection, use the CLI flag <span style=color:#e6db74>`</span>--unhandled-rejections<span style=color:#f92672>=</span>strict<span style=color:#e6db74>`</span> <span style=color:#f92672>(</span>see https://nodejs.org/api/cli.html#cli_unhandled_rejections_mode<span style=color:#f92672>)</span>. <span style=color:#f92672>(</span>rejection id: 1<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>node:18<span style=color:#f92672>)</span> <span style=color:#f92672>[</span>DEP0018<span style=color:#f92672>]</span> DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code.
</span></span></code></pre></div><p>ðŸ¤¯ We are bombarded with an error. If we see it, it is crying because of the MySQL connection. Our container is not able to connect to the MySQL server. And this is straightforward as no MySQL container is running in the network. We will look at it later when we compose our application. For now, let&rsquo;s move ahead.</p><h2 id=create-dockerfile-for-frontend>Create <code>Dockerfile</code> for frontend<a hidden class=anchor aria-hidden=true href=#create-dockerfile-for-frontend>#</a></h2><p>Copy the following <code>Dockerfile</code> content inside <code>frontend/Dockerfile</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Dockerfile data-lang=Dockerfile><span style=display:flex><span><span style=color:#66d9ef>FROM</span><span style=color:#e6db74> node:12-alpine AS builder</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>WORKDIR</span><span style=color:#e6db74> /app</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>COPY</span> package.json package.json<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> npm install<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>COPY</span> . .<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> npm run build<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>FROM</span><span style=color:#e6db74> nginx:alpine</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>WORKDIR</span><span style=color:#e6db74> /usr/share/nginx/html</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> rm -rf ./*<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>COPY</span> --from<span style=color:#f92672>=</span>builder /app/build .<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>ENTRYPOINT</span> [<span style=color:#e6db74>&#34;nginx&#34;</span>, <span style=color:#e6db74>&#34;-g&#34;</span>, <span style=color:#e6db74>&#34;daemon off;&#34;</span>]<span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><blockquote><p>Option <code>daemon off</code> specifies nginx to run in the foreground so that the container will continue running. If we don&rsquo;t specify this option, the nginx service would run in the background and the container will stop running as there is nothing to hold it up.</p></blockquote><p>Let&rsquo;s build the image.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>âŸ© docker build -t bitphile/todo-frontend .                               <span style=color:#f92672>(</span>base<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>Sending build context to Docker daemon  478.7kB
</span></span><span style=display:flex><span>Step 1/11 : FROM node:12-alpine AS builder
</span></span><span style=display:flex><span> ---&gt; bb6d28039b8c
</span></span><span style=display:flex><span>Step 2/11 : WORKDIR /app
</span></span><span style=display:flex><span> ---&gt; Using cache
</span></span><span style=display:flex><span> ---&gt; 8610e0568d30
</span></span><span style=display:flex><span>Step 3/11 : COPY package.json package.json
</span></span><span style=display:flex><span> ---&gt; 2cf4f42b3f97
</span></span><span style=display:flex><span>Step 4/11 : RUN npm install
</span></span><span style=display:flex><span> ---&gt; Running in 0606b5b332ec
</span></span><span style=display:flex><span>performance.now<span style=color:#f92672>()</span> and performance.timeOrigin.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&gt; core-js@3.29.1 postinstall /app/node_modules/core-js
</span></span><span style=display:flex><span>&gt; node -e <span style=color:#e6db74>&#34;try{require(&#39;./postinstall&#39;)}catch(e){}&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Thank you <span style=color:#66d9ef>for</span> using core-js <span style=color:#f92672>(</span> https://github.com/zloirock/core-js <span style=color:#f92672>)</span> <span style=color:#66d9ef>for</span> polyfilling JavaScript standard library!
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>The project needs your help! Please consider supporting of core-js:
</span></span><span style=display:flex><span>&gt; https://opencollective.com/core-js
</span></span><span style=display:flex><span>&gt; https://patreon.com/zloirock
</span></span><span style=display:flex><span>&gt; https://boosty.to/zloirock
</span></span><span style=display:flex><span>&gt; bitcoin: bc1qlea7544qtsmj2rayg0lthvza9fau63ux0fstcz
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>I highly recommend reading this: https://github.com/zloirock/core-js/blob/master/docs/2023-02-14-so-whats-next.md
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&gt; core-js-pure@3.29.1 postinstall /app/node_modules/core-js-pure
</span></span><span style=display:flex><span>&gt; node -e <span style=color:#e6db74>&#34;try{require(&#39;./postinstall&#39;)}catch(e){}&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Thank you <span style=color:#66d9ef>for</span> using core-js <span style=color:#f92672>(</span> https://github.com/zloirock/core-js <span style=color:#f92672>)</span> <span style=color:#66d9ef>for</span> polyfilling JavaScript standard library!
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>The project needs your help! Please consider supporting of core-js:
</span></span><span style=display:flex><span>&gt; https://opencollective.com/core-js
</span></span><span style=display:flex><span>&gt; https://patreon.com/zloirock
</span></span><span style=display:flex><span>&gt; https://boosty.to/zloirock
</span></span><span style=display:flex><span>&gt; bitcoin: bc1qlea7544qtsmj2rayg0lthvza9fau63ux0fstcz
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>I highly recommend reading this: https://github.com/zloirock/core-js/blob/master/docs/2023-02-14-so-whats-next.md
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>added <span style=color:#ae81ff>1489</span> packages from <span style=color:#ae81ff>684</span> contributors and audited <span style=color:#ae81ff>1490</span> packages in 69.985s
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>233</span> packages are looking <span style=color:#66d9ef>for</span> funding
</span></span><span style=display:flex><span>  run <span style=color:#e6db74>`</span>npm fund<span style=color:#e6db74>`</span> <span style=color:#66d9ef>for</span> details
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>found <span style=color:#ae81ff>1</span> high severity vulnerability
</span></span><span style=display:flex><span>  run <span style=color:#e6db74>`</span>npm audit fix<span style=color:#e6db74>`</span> to fix them, or <span style=color:#e6db74>`</span>npm audit<span style=color:#e6db74>`</span> <span style=color:#66d9ef>for</span> details
</span></span><span style=display:flex><span>Removing intermediate container 0606b5b332ec
</span></span><span style=display:flex><span> ---&gt; e84821d3c273
</span></span><span style=display:flex><span>Step 5/11 : COPY . .
</span></span><span style=display:flex><span> ---&gt; 2582c9e1ccf7
</span></span><span style=display:flex><span>Step 6/11 : RUN npm run build
</span></span><span style=display:flex><span> ---&gt; Running in 24a2880afcea
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&gt; todo-app@0.1.0 build /app
</span></span><span style=display:flex><span>&gt; react-scripts build
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Creating an optimized production build...
</span></span><span style=display:flex><span>Compiled successfully.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>File sizes after gzip:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  47.56 kB  build/static/js/main.bf9caf07.js
</span></span><span style=display:flex><span>  1.78 kB   build/static/js/787.2843ca88.chunk.js
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>264</span> B     build/static/css/main.e6c13ad2.css
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>The project was built assuming it is hosted at /.
</span></span><span style=display:flex><span>You can control this with the homepage field in your package.json.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>The build folder is ready to be deployed.
</span></span><span style=display:flex><span>You may serve it with a static server:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  npm install -g serve
</span></span><span style=display:flex><span>  serve -s build
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Find out more about deployment here:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  https://cra.link/deployment
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Removing intermediate container 24a2880afcea
</span></span><span style=display:flex><span> ---&gt; ca6123013213
</span></span><span style=display:flex><span>Step 7/11 : FROM nginx:alpine
</span></span><span style=display:flex><span> ---&gt; 2bc7edbc3cf2
</span></span><span style=display:flex><span>Step 8/11 : WORKDIR /usr/share/nginx/html
</span></span><span style=display:flex><span> ---&gt; Using cache
</span></span><span style=display:flex><span> ---&gt; 14150ff7fb4b
</span></span><span style=display:flex><span>Step 9/11 : RUN rm -rf ./*
</span></span><span style=display:flex><span> ---&gt; Using cache
</span></span><span style=display:flex><span> ---&gt; dec51b86101d
</span></span><span style=display:flex><span>Step 10/11 : COPY --from<span style=color:#f92672>=</span>builder /app/build .
</span></span><span style=display:flex><span> ---&gt; bfc76e5e13ec
</span></span><span style=display:flex><span>Step 11/11 : ENTRYPOINT <span style=color:#f92672>[</span><span style=color:#e6db74>&#34;nginx&#34;</span>, <span style=color:#e6db74>&#34;-g&#34;</span>, <span style=color:#e6db74>&#34;daemon off;&#34;</span><span style=color:#f92672>]</span>
</span></span><span style=display:flex><span> ---&gt; Running in c01fb95e9ca3
</span></span><span style=display:flex><span>Removing intermediate container c01fb95e9ca3
</span></span><span style=display:flex><span> ---&gt; 9ad959056d7a
</span></span><span style=display:flex><span>Successfully built 9ad959056d7a
</span></span><span style=display:flex><span>Successfully tagged bitphile/todo-frontend:latest
</span></span></code></pre></div><p>Let&rsquo;s run the image.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>âŸ© docker run -d --name todo-frontend -p 4000:80 bitphile/todo-frontend
</span></span></code></pre></div><p>Now, if we open <code>http://localhost:4000</code>, we should the to-do page.</p><h2 id=create-docker-compose-file>Create Docker Compose file<a hidden class=anchor aria-hidden=true href=#create-docker-compose-file>#</a></h2><p>It is time to take the whole picture of our application. To run our application with all those services, we have to create a <code>docker-compose.yml</code> file. Let&rsquo;s do create one.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#f92672>version</span>: <span style=color:#e6db74>&#39;3.7&#39;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>todo-app</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>services</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>todo-frontend</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>todo-frontend</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>build</span>: <span style=color:#ae81ff>./frontend</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>4000</span>:<span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>networks</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>todo-app</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>depends_on</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>todo-backend</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>todo-backend</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>todo-server</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>build</span>: <span style=color:#ae81ff>./backend</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>3001</span>:<span style=color:#ae81ff>3001</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>networks</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>todo-app</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>environment</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>NODE_ENV=production</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>DB_USER=root</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>DB_PASSWORD=password</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>depends_on</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>mysql</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>mysql</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>mysql-server</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>mysql:5.7</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>volumes</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>./mysql:/var/lib/mysql</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>environment</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>MYSQL_ROOT_PASSWORD</span>: <span style=color:#ae81ff>password</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>MYSQL_DATABASE</span>: <span style=color:#ae81ff>todo_app</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>networks</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>todo-app</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>networks</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>todo-app</span>:
</span></span></code></pre></div><p>Let&rsquo;s do compose up,</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>âŸ© docker compose up -d                                                   <span style=color:#f92672>(</span>base<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>+<span style=color:#f92672>]</span> Building 83.3s <span style=color:#f92672>(</span>22/22<span style=color:#f92672>)</span> FINISHED
</span></span><span style=display:flex><span> <span style=color:#f92672>=</span>&gt; <span style=color:#f92672>[</span>todo-app_todo-frontend internal<span style=color:#f92672>]</span> load build definition from Dockerfi  0.0s
</span></span><span style=display:flex><span> <span style=color:#f92672>=</span>&gt; <span style=color:#f92672>=</span>&gt; transferring dockerfile: 305B                                       0.0s
</span></span><span style=display:flex><span> <span style=color:#f92672>=</span>&gt; <span style=color:#f92672>[</span>todo-app_todo-backend internal<span style=color:#f92672>]</span> load build definition from Dockerfil  0.0s
</span></span><span style=display:flex><span> <span style=color:#f92672>=</span>&gt; <span style=color:#f92672>=</span>&gt; transferring dockerfile: 191B                                       0.0s
</span></span><span style=display:flex><span> <span style=color:#f92672>=</span>&gt; <span style=color:#f92672>[</span>todo-app_todo-frontend internal<span style=color:#f92672>]</span> load .dockerignore                   0.0s
</span></span><span style=display:flex><span> <span style=color:#f92672>=</span>&gt; <span style=color:#f92672>=</span>&gt; transferring context: 61B                                           0.0s
</span></span><span style=display:flex><span> <span style=color:#f92672>=</span>&gt; <span style=color:#f92672>[</span>todo-app_todo-backend internal<span style=color:#f92672>]</span> load .dockerignore                    0.0s
</span></span><span style=display:flex><span> <span style=color:#f92672>=</span>&gt; <span style=color:#f92672>=</span>&gt; transferring context: 60B                                           0.0s
</span></span><span style=display:flex><span> <span style=color:#f92672>=</span>&gt; <span style=color:#f92672>[</span>todo-app_todo-frontend internal<span style=color:#f92672>]</span> load metadata <span style=color:#66d9ef>for</span> docker.io/library  0.0s
</span></span><span style=display:flex><span> <span style=color:#f92672>=</span>&gt; <span style=color:#f92672>[</span>todo-app_todo-backend internal<span style=color:#f92672>]</span> load metadata <span style=color:#66d9ef>for</span> docker.io/library/  0.0s
</span></span><span style=display:flex><span> <span style=color:#f92672>=</span>&gt; CACHED <span style=color:#f92672>[</span>todo-app_todo-frontend builder 1/6<span style=color:#f92672>]</span> FROM docker.io/library/no  0.0s
</span></span><span style=display:flex><span> <span style=color:#f92672>=</span>&gt; <span style=color:#f92672>[</span>todo-app_todo-frontend stage-1 1/4<span style=color:#f92672>]</span> FROM docker.io/library/nginx:alp  0.0s
</span></span><span style=display:flex><span> <span style=color:#f92672>=</span>&gt; <span style=color:#f92672>[</span>todo-app_todo-frontend internal<span style=color:#f92672>]</span> load build context                   0.0s
</span></span><span style=display:flex><span> <span style=color:#f92672>=</span>&gt; <span style=color:#f92672>=</span>&gt; transferring context: 458.37kB                                      0.0s
</span></span><span style=display:flex><span> <span style=color:#f92672>=</span>&gt; CACHED <span style=color:#f92672>[</span>todo-app_todo-frontend stage-1 2/4<span style=color:#f92672>]</span> WORKDIR /usr/share/nginx/  0.0s
</span></span><span style=display:flex><span> <span style=color:#f92672>=</span>&gt; <span style=color:#f92672>[</span>todo-app_todo-frontend stage-1 3/4<span style=color:#f92672>]</span> RUN rm -rf ./*                    0.5s
</span></span><span style=display:flex><span> <span style=color:#f92672>=</span>&gt; CACHED <span style=color:#f92672>[</span>todo-app_todo-frontend builder 2/6<span style=color:#f92672>]</span> WORKDIR /app               0.0s
</span></span><span style=display:flex><span> <span style=color:#f92672>=</span>&gt; <span style=color:#f92672>[</span>todo-app_todo-frontend builder 3/6<span style=color:#f92672>]</span> COPY package.json package.json    0.0s
</span></span><span style=display:flex><span> <span style=color:#f92672>=</span>&gt; <span style=color:#f92672>[</span>todo-app_todo-backend internal<span style=color:#f92672>]</span> load build context                    0.0s
</span></span><span style=display:flex><span> <span style=color:#f92672>=</span>&gt; <span style=color:#f92672>=</span>&gt; transferring context: 1.60kB                                        0.0s
</span></span><span style=display:flex><span> <span style=color:#f92672>=</span>&gt; <span style=color:#f92672>[</span>todo-app_todo-backend 2/4<span style=color:#f92672>]</span> COPY package.json package.json             0.0s
</span></span><span style=display:flex><span> <span style=color:#f92672>=</span>&gt; <span style=color:#f92672>[</span>todo-app_todo-frontend builder 4/6<span style=color:#f92672>]</span> RUN npm install                  69.0s
</span></span><span style=display:flex><span> <span style=color:#f92672>=</span>&gt; <span style=color:#f92672>[</span>todo-app_todo-backend 3/4<span style=color:#f92672>]</span> RUN npm install                            5.9s
</span></span><span style=display:flex><span> <span style=color:#f92672>=</span>&gt; <span style=color:#f92672>[</span>todo-app_todo-backend 4/4<span style=color:#f92672>]</span> COPY index.js index.js                     0.0s
</span></span><span style=display:flex><span> <span style=color:#f92672>=</span>&gt; <span style=color:#f92672>[</span>todo-app_todo-frontend<span style=color:#f92672>]</span> exporting to image                            0.2s
</span></span><span style=display:flex><span> <span style=color:#f92672>=</span>&gt; <span style=color:#f92672>=</span>&gt; exporting layers                                                    0.0s
</span></span><span style=display:flex><span> <span style=color:#f92672>=</span>&gt; <span style=color:#f92672>=</span>&gt; writing image sha256:c30480a00b3ca5464f566693178dd5ae117d60a3a62e5  0.0s
</span></span><span style=display:flex><span> <span style=color:#f92672>=</span>&gt; <span style=color:#f92672>=</span>&gt; naming to docker.io/library/todo-app_todo-backend                   0.0s
</span></span><span style=display:flex><span> <span style=color:#f92672>=</span>&gt; <span style=color:#f92672>=</span>&gt; writing image sha256:28501b3d67ba977a812cfc9e21e91279e52765dc1276a  0.0s
</span></span><span style=display:flex><span> <span style=color:#f92672>=</span>&gt; <span style=color:#f92672>=</span>&gt; naming to docker.io/library/todo-app_todo-frontend                  0.0s
</span></span><span style=display:flex><span> <span style=color:#f92672>=</span>&gt; <span style=color:#f92672>[</span>todo-app_todo-frontend builder 5/6<span style=color:#f92672>]</span> COPY . .                          0.0s
</span></span><span style=display:flex><span> <span style=color:#f92672>=</span>&gt; <span style=color:#f92672>[</span>todo-app_todo-frontend builder 6/6<span style=color:#f92672>]</span> RUN npm run build                13.5s
</span></span><span style=display:flex><span> <span style=color:#f92672>=</span>&gt; <span style=color:#f92672>[</span>todo-app_todo-frontend stage-1 4/4<span style=color:#f92672>]</span> COPY --from<span style=color:#f92672>=</span>builder /app/build .  0.0s
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>+<span style=color:#f92672>]</span> Running 4/4
</span></span><span style=display:flex><span> â ¿ Network todo-app_todo-app  Created                                      0.0s
</span></span><span style=display:flex><span> â ¿ Container mysql-server     Started                                      0.7s
</span></span><span style=display:flex><span> â ¿ Container todo-server      Started                                      1.1s
</span></span><span style=display:flex><span> â ¿ Container todo-frontend    Started                                      1.6s
</span></span></code></pre></div><p>Great! Containers seemed to be started. Let&rsquo;s see,</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>âŸ© docker compose ps -a                                                   <span style=color:#f92672>(</span>base<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>NAME                COMMAND                  SERVICE             STATUS              PORTS
</span></span><span style=display:flex><span>mysql-server        <span style=color:#e6db74>&#34;docker-entrypoint.sâ€¦&#34;</span>   mysql               running             3306/tcp, 33060/tcp
</span></span><span style=display:flex><span>todo-frontend       <span style=color:#e6db74>&#34;nginx -g &#39;daemon ofâ€¦&#34;</span>   todo-frontend       running             0.0.0.0:4000-&gt;80/tcp
</span></span><span style=display:flex><span>todo-server         <span style=color:#e6db74>&#34;docker-entrypoint.sâ€¦&#34;</span>   todo-backend        running             0.0.0.0:3001-&gt;3001/tcp, 3001/tcp
</span></span></code></pre></div><p>Now, open <code>http://localhost:4000</code> and add todos.</p><h2 id=an-introduction-to-deploys>An introduction to deploys<a hidden class=anchor aria-hidden=true href=#an-introduction-to-deploys>#</a></h2><p>We can create multiple containers for the same service using <code>deploy</code> in docker compose.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#f92672>version</span>: <span style=color:#e6db74>&#39;3.7&#39;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>todo-app</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>services</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>todo-frontend</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>todo-frontend</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>build</span>: <span style=color:#ae81ff>./frontend</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>4000</span>:<span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>networks</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>todo-app</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>depends_on</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>todo-backend</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>todo-backend</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>todo-server</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>build</span>: <span style=color:#ae81ff>./backend</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>3000</span>:<span style=color:#ae81ff>3000</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>networks</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>todo-app</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>environment</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>NODE_ENV=production</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>DB_USER=root</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>DB_PASSWORD=password</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>depends_on</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>mysql</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>deploy</span>:
</span></span><span style=display:flex><span>	    <span style=color:#f92672>mode</span>: <span style=color:#ae81ff>replicated</span>
</span></span><span style=display:flex><span>	    <span style=color:#f92672>replicas</span>: <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>mysql</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>mysql-server</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>mysql:5.7</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>volumes</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>./mysql:/var/lib/mysql</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>environment</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>MYSQL_ROOT_PASSWORD</span>: <span style=color:#ae81ff>password</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>MYSQL_DATABASE</span>: <span style=color:#ae81ff>todo_app</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>networks</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>todo-app</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>networks</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>todo-app</span>:
</span></span></code></pre></div><p>So, this would create two replicas of the service <code>todo-backend</code>. The routing of which container the request should be sent to would be taken care of by the docker itself.</p><h3 id=restart-policy>Restart policy<a hidden class=anchor aria-hidden=true href=#restart-policy>#</a></h3><p>If the container dies unexpectedly, docker compose can restart the container. Docker compose provides a restart policy for the same that we can define in docker compose file.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#f92672>version</span>: <span style=color:#e6db74>&#39;3.7&#39;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>todo-app</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>services</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>todo-backend</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>todo-server</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>build</span>: <span style=color:#ae81ff>./backend</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>3001</span>:<span style=color:#ae81ff>3001</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>networks</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>todo-app</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>environment</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>NODE_ENV=production</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>DB_USER=root</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>DB_PASSWORD=password</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>depends_on</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>mysql</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>deploy</span>:
</span></span><span style=display:flex><span>	    <span style=color:#f92672>mode</span>: <span style=color:#ae81ff>replicated</span>
</span></span><span style=display:flex><span>	    <span style=color:#f92672>replicas</span>: <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>	    <span style=color:#f92672>restart_policy</span>:
</span></span><span style=display:flex><span>		    <span style=color:#f92672>condition</span>: <span style=color:#ae81ff>any</span>
</span></span><span style=display:flex><span>		    <span style=color:#f92672>delay</span>: <span style=color:#ae81ff>5s</span>
</span></span><span style=display:flex><span>		    <span style=color:#f92672>max_attempts</span>: <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>		    <span style=color:#f92672>window</span>: <span style=color:#ae81ff>80s</span>
</span></span></code></pre></div><p><code>condition</code> means the condition to restart the service. <code>delay</code> is the delay in subsequent restart tries and <code>window</code> means how long to wait to decide if the restart is done.</p><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h2><p>Well, this is it for now. I hope you find this useful. If there is any problem while setting up the project and running that up, please drop a comment. Please share your feedback and what our next junction topic should be, in the comment section.</p><p>Until then,</p><p><img loading=lazy src=/bye-mr-bean.gif alt="Bye by Mr Bean" title="Bye bye, see you on next post"></p><h2 id=references>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h2><ol><li><a href=https://docs.docker.com/compose/compose-file/deploy/>Docker Compose file reference</a></li></ol></div><footer class=post-footer><ul class=post-tags><li><a href=https://nitinsharmacs.github.io/tags/docker-compose/>docker-compose</a></li><li><a href=https://nitinsharmacs.github.io/tags/compose/>compose</a></li><li><a href=https://nitinsharmacs.github.io/tags/microservices/>microservices</a></li><li><a href=https://nitinsharmacs.github.io/tags/networks/>networks</a></li></ul></footer><div id=commentor></div><script>const embedCommentorJs=()=>new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("defer",!0),n.src="/commentor/commentor.js",n.onload=e,n.onerror=t,document.head.appendChild(n)}),embedCommentorStyles=()=>new Promise((e,t)=>{const n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.href="/commentor/commentor.css",n.onload=e,n.onerror=t,document.head.appendChild(n)}),getPageId=()=>window.location.href.split("/").slice(-2).join("");embedCommentorJs().then(()=>embedCommentorStyles()).then(()=>{Commentor&&Commentor.init("Comments",getPageId())}).catch(e=>console.error("Commentor not loaded",e))</script></article></main><footer class=footer><span>&copy; 2023 <a href=https://nitinsharmacs.github.io>bitPhile</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>